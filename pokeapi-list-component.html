<link rel="import" href="./bower_components/polymer/polymer-element.html">
<link rel="import" href="./bower_components/iron-demo-helpers/demo-snippet.html">
<link rel="import" href="./pokeapi-request-component.html">
<link rel="import" href="./simple-expand-collapse.html">

<dom-module id="pokeapi-list-component">
  
    <pokeapi-request-component></pokeapi-request-component> 
    <demo-snippet>
    
      <template>
        <simple-expand-collapse btnname="[[pokemons.detail.name]]">
        <h1> [[pokemons.detail.name]]</h1>
          [[pokemons.detail.url]]
        </simple-expand-collapse>
      </template>
  
    </demo-snippet>
  
  <script>
    /**
     * `pokeapi-list-component`
     * Lista de pokemons
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class PokeapiListComponent extends Polymer.Element {
      static get is() { return 'pokeapi-list-component'; }
      static get properties() {
        return {
          pokemons: {
                type: Array,
                value: []
            },

          name: {
            type: String, 
            value: 'Sin nombre'
          },

          url: {
            type: String, 
            value: 'Sin url'
          },
        };
      }

      //Este componente recibe la data del evento de poque-request-component
      //El connectedCallback es IGUAL a USEEFFECT
      connectedCallback(){
        super.connectedCallback();
        window.addEventListener('onRequest', (event) => this.perro(event))
      }
      perro(event){
        this.pokemons = event;
        console.log(this.pokemons)
      }

    }

    window.customElements.define(PokeapiListComponent.is, PokeapiListComponent);
  </script>
</dom-module>

